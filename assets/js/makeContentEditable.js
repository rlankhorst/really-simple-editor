"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,d=e[Symbol.iterator]();!(n=(a=d.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&d.return&&d.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},editSVG_image='<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" data-prefix="far" data-icon="edit" class="svg-inline--fa fa-edit fa-w-18 rsed_editSVG" role="img" viewBox="0 0 576 512"><path fill="currentColor" d="M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"/></svg>',checkSVG='<svg class="rsed_checkSVG" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" data-prefix="fas" data-icon="check" class="svg-inline--fa fa-check fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/><path xmlns="http://www.w3.org/2000/svg" fill="currentColor" d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"></path></svg>',editableContent={},editButtons={},focus=void 0,backupHTML={},normalEditor=!0,saveTime=500,url=void 0;function createBackup(){backupHTML.main=document.querySelector(".rsed_content").innerHTML,backupHTML.title=document.querySelector(".rsed_title").innerHTML;var e=!0,t=!1,r=void 0;try{for(var n,o=document.querySelectorAll(".rsed_meta_canUpdate")[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;backupHTML[i.id]=i.innerHTML}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}}function makeContentEditable(){var e=!0,t=!1,r=void 0;try{for(var n,o=document.querySelectorAll(".wp-editor-wrap")[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;if("wp-editor-wrap"===i.id)jQuery("#wp-editor-wrap").insertAfter(".rsed_editable"),jQuery("#wp-editor-wrap").css("display","none");else{var a=i.id.substring(10,11);jQuery("#wp-editor_"+a+"-wrap").insertAfter("#rsed_"+a),jQuery("#wp-editor_"+a+"-wrap").css("display","none")}}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}addEditableListener("main")}function makeMetaEditable(){for(var e=document.querySelectorAll(".rsed_meta_canUpdate"),t=0;t<e.length;t++)addEditableListener(""+(t+1))}function makeTitleEditable(){addEditableListener("title")}function addEditableListener(t){var r=void 0;"main"===t?(r="main",editableContent.main=document.querySelector(".rsed_content"),editButtons.main=document.querySelector(".rsed_editButtons_main")):"title"===t?(r="title",editableContent.title=document.querySelector(".rsed_title"),editButtons.title=document.querySelector(".rsed_editButtons_title")):(editableContent[r="meta_"+t]=document.querySelector("#rsed_"+t),editButtons[r]=document.querySelector(".rsed_editButtons_"+t)),editableContent[r].addEventListener("click",function(e){focus&&focus!==r&&(closeStyles(focus),selectNormalEditor(r.body),checkIfPlaceholdersNeeded()),"title"===(focus=r)&&e.target.classList.add("title_of_post"),"main"===focus?$("#mainDiv").text()===window.rsed_translateStrings.edit_content&&($("#mainDiv").text(""),$("#mainDiv").removeClass("rsed_textPlaceholder")):"title"===focus?$(".rsed_title.rsed_selected").text()===window.rsed_translateStrings.edit_title&&($(".rsed_title").text(""),$(".rsed_title").removeClass("rsed_textPlaceholder")):$("#rsed_"+t).text()===window.rsed_translateStrings.edit_meta&&($("#rsed_"+t).text(""),$("#rsed_"+t).removeClass("rsed_textPlaceholder")),editableContent[r].classList.add("rsed_selected"),editableContent[r].contentEditable=!0,editButtons[r].style.display="block"})}function closeEditMode(e){if(focus&&!e.target.closest(".media-modal.wp-core-ui")&&!(e.target.closest(".mce-btn")||e.target.closest(".wp-editor-wrap")||e.target.closest(".rsed_dontClose")||"main"===focus&&e.target.closest(".rsed_content")||"title"===focus&&e.target.closest(".rsed_title"))){if(void 0!==focus&&-1<focus.indexOf("meta_")){var t=focus.substr(5,6);try{if(e.target.closest("#rsed_"+t))return}catch(e){}}closeStyles(focus),checkIfPlaceholdersNeeded(),selectNormalEditor()}}function selectNormalEditor(){var e=!0,t=!1,r=void 0;try{for(var n,o=document.querySelectorAll(".rsed_richEditor")[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.style.display="block"}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}var i=!0,a=!1,d=void 0;try{for(var c,l=document.querySelectorAll(".rsed_normalEditor")[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){c.value.style.display="none"}}catch(e){a=!0,d=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw d}}var u=!0,s=!1,y=void 0;try{for(var m,f=document.querySelectorAll(".wp-editor-wrap")[Symbol.iterator]();!(u=(m=f.next()).done);u=!0){var v=m.value;if(v.style.display="none","wp-editor-wrap"===v.id)document.querySelector(".rsed_editable").style.display="block";else{var _=focus.substring(5);jQuery("#rsed_"+_).css("display","block")}}}catch(e){s=!0,y=e}finally{try{!u&&f.return&&f.return()}finally{if(s)throw y}}normalEditor=!0}function closeStyles(e){editableContent[e].classList.remove("rsed_selected"),editableContent[e].contentEditable=!1,editButtons[e].style.display="none"}function ToggleEditor(){if(normalEditor){var e=!0,t=!1,r=void 0;try{for(var n,o=document.querySelectorAll(".rsed_richEditor")[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.style.display="none"}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}var i=!0,a=!1,d=void 0;try{for(var c,l=document.querySelectorAll(".rsed_normalEditor")[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){c.value.style.display="block"}}catch(e){a=!0,d=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw d}}"main"===focus?(jQuery(".rsed_editable").css("display","none"),jQuery("#wp-editor-wrap").css("display","block"),setTimeout(function(){document.querySelector("#editor_ifr").contentDocument.body.dispatchEvent(new Event("keyup"))},50)):(w=focus.substring(5),jQuery("#wp-editor_"+w+"-wrap").css("display","block"),jQuery("#rsed_"+w).css("display","none"),setTimeout(function(){document.querySelector("#editor_"+w+"_ifr").contentDocument.body.dispatchEvent(new Event("keyup"))},50))}else{var u=!0,s=!1,y=void 0;try{for(var m,f=document.querySelectorAll(".rsed_richEditor")[Symbol.iterator]();!(u=(m=f.next()).done);u=!0){m.value.style.display="block"}}catch(e){s=!0,y=e}finally{try{!u&&f.return&&f.return()}finally{if(s)throw y}}var v=!0,_=!1,S=void 0;try{for(var p,b=document.querySelectorAll(".rsed_normalEditor")[Symbol.iterator]();!(v=(p=b.next()).done);v=!0){p.value.style.display="none"}}catch(e){_=!0,S=e}finally{try{!v&&b.return&&b.return()}finally{if(_)throw S}}if("main"===focus)jQuery(".rsed_editable").css("display","block"),jQuery("#wp-editor-wrap").css("display","none");else{var T=focus.substring(5);jQuery("#wp-editor_"+T+"-wrap").css("display","none"),jQuery("#rsed_"+T).css("display","block")}}var w;normalEditor=!normalEditor}function revertText(){if("main"===focus)document.querySelector(".rsed_content").innerHTML=backupHTML.main,document.querySelector("#editor_ifr").contentDocument.body.innerHTML=backupHTML.main,document.querySelector(".wp-editor-area#editor").value=backupHTML.main,autoSave_mainText(backupHTML.main);else if("title"===focus)document.querySelector(".rsed_title").innerHTML=backupHTML.title,document.querySelector(".rsed_title").dispatchEvent(new Event("keyup"));else{var e=focus.substring(5);document.querySelector("#rsed_"+e).innerHTML=backupHTML["rsed_"+e],document.querySelector("#editor_"+e+"_ifr")?(document.querySelector("#editor_"+e+"_ifr").contentDocument.body.innerHTML=backupHTML["rsed_"+e],document.querySelector(".wp-editor-area#editor_"+e).value=backupHTML["rsed_"+e],document.querySelector("#qt_editor_"+e+"_toolbar").click()):document.querySelector("#rsed_"+e).dispatchEvent(new Event("keyup"))}}jQuery(document).ready(function(){window.ajaxurl&&(url=window.location.origin+window.ajaxurl),document.querySelector(".rsed_editable")&&(document.body.addEventListener("click",closeEditMode),createBackup(),makeContentEditable(),makeMetaEditable(),makeTitleEditable(),checkTitleforAnchorTags(),checkIfPlaceholdersNeeded(),thumbnail_show_EditableText())});var delay=function(){var r=0;return function(e,t){clearTimeout(r),r=setTimeout(e,t)}}();function getMetaData(e){var t=e.classList[1].indexOf("_unique123_");return[e.classList[1].substring(5,t),e.classList[1].substring(t+11)]}function autoSave_mainText(e){var t={html:e,action:"autoSave_mainText",post_ID:document.getElementById("mainDiv").classList[1].substring(10)},r=document.getElementById("rsed_safeText_main");r.innerText=window.rsed_translateStrings.edit_saving,r.classList.add("rsed_safeText"),jQuery.post(url,t,function(e){r.innerHTML=checkSVG+" "+window.rsed_translateStrings.edit_saved,console.log("succesfully saved post")})}function autoSave_title(){var e=document.querySelector(".rsed_title").classList[1].substring(10),t={html:document.querySelector(".rsed_title").innerHTML,action:"autoSave_title",post_ID:e},r=document.getElementById("rsed_safeText_title");r.innerText=window.rsed_translateStrings.edit_saving,r.classList.add("rsed_safeText"),jQuery.post(url,t,function(e){r.innerHTML=checkSVG+" "+window.rsed_translateStrings.edit_saved,console.log("succesfully saved title")})}function autoSave_meta(e,t,r,n){var o={html:e,action:"autoSave_meta",post_ID:r,meta_key:t},i=document.getElementById("rsed_safeText_"+n);i.innerText=window.rsed_translateStrings.edit_saving,i.classList.add("rsed_safeText"),jQuery.post(url,o,function(e){i.innerHTML=checkSVG+" "+window.rsed_translateStrings.edit_saved,console.log("succesfully saved meta")})}function save_thumnail(e){var t=document.querySelector("#mainDiv").classList[1].indexOf("rsed_post_"),r={action:"rsed_safe_thumbnail",post_ID:document.querySelector("#mainDiv").classList[1].substring(t+10),thumbNail_ID:e};jQuery.post(url,r,function(e){console.log("succesfully saved thumbnail"),window.location.reload(!0)})}function pictureEditingSave(){if("main"===focus){var e=document.querySelector("#editor_ifr").contentDocument.body.innerHTML;autoSave_mainText(document.querySelector(".rsed_content").innerHTML=e)}else{id=focus.substring(5,6);var t=document.querySelector("#editor_"+id+"_ifr").contentDocument.body.innerHTML,r=document.querySelector("#rsed_"+id);r.innerHTML=t;var n=getMetaData(r),o=_slicedToArray(n,2);autoSave_meta(t,o[0],o[1],id)}}function checkIfPlaceholdersNeeded(){$(".rsed_title").text()||($(".rsed_title").text(window.rsed_translateStrings.edit_title),$(".rsed_title").addClass("rsed_textPlaceholder")),$(".title_of_post").text()||($(".title_of_post").text(window.rsed_translateStrings.edit_title),$(".title_of_post").addClass("rsed_textPlaceholder")),$("#mainDiv").text()||($("#mainDiv").text(window.rsed_translateStrings.edit_content),$("#mainDiv").addClass("rsed_textPlaceholder")),$(".rsed_meta_canUpdate").each(function(e){$("#rsed_"+(e+1)).text()||($("#rsed_"+(e+1)).text(window.rsed_translateStrings.edit_meta),$("#rsed_"+(e+1)).addClass("rsed_textPlaceholder"))})}function thumbnail_show_EditableText(){$("#postimagediv").on("mouseenter",function(){$("#set-post-thumbnail").append('<span class="rsed_editText">'+editSVG_image+"</span>")}),$("#postimagediv").on("mouseleave",function(){$(".rsed_editText").remove()})}function checkTitleforAnchorTags(){var e=!0,t=!1,r=void 0;try{for(var n,o=document.querySelectorAll(".rsed_title")[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;"A"===i.parentElement.tagName&&i.classList.remove("rsed_title")}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}}jQuery(document).ready(function(){setTimeout(function(){var e=!0,t=!1,r=void 0;try{for(var n,o=document.querySelectorAll(".switch-tmce")[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.click()}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}},500),document.querySelector(".rsed_editable")&&setTimeout(function(){var n=document.querySelector("#editor_ifr").contentDocument.body;n.innerHTML=document.querySelector(".rsed_content").innerHTML,n.addEventListener("keyup",function(e){var t=n.innerHTML;e instanceof Event||(document.querySelector(".rsed_content").innerHTML=t,delay(function(){autoSave_mainText(t)},saveTime))}),document.querySelector("#editor").addEventListener("keyup",function(){var e=document.querySelector("#editor").value;document.querySelector(".rsed_content").innerHTML="<p>"+e+"</p>",delay(function(){autoSave_mainText(e)},saveTime)}),document.querySelector(".rsed_content").addEventListener("keyup",function(){var e=document.querySelector(".rsed_content").innerHTML;n.innerHTML=e,document.querySelector("#editor").value=e,delay(function(){autoSave_mainText(e)},saveTime)}),document.querySelector("#wp-editor-wrap").addEventListener("click",function(e){var t,r;e.target.closest(".mce-container-body.mce-flow-layout")&&(t=n.innerHTML,document.querySelector(".rsed_content").innerHTML=t,delay(function(){autoSave_mainText(t)},saveTime)),e.target.closest("#qt_editor_toolbar")&&(r=document.querySelector("#editor").value,document.querySelector(".rsed_content").innerHTML="<p>"+r+"</p>",delay(function(){autoSave_mainText(r)},saveTime))});for(var d=document.querySelectorAll(".rsed_hasTinyMCE"),c=[],e=function(e){var n=d[e].id.substring(5);c.push(n);var o=document.querySelector("#editor_"+n+"_ifr").contentDocument.body;o.innerHTML=document.querySelector("#rsed_"+n).innerHTML;var t=getMetaData(document.querySelector("#rsed_"+n)),r=_slicedToArray(t,2),i=r[0],a=r[1];o.addEventListener("keyup",function(e){var t=o.innerHTML;e instanceof Event||(document.querySelector("#rsed_"+n).innerHTML=t,delay(function(){autoSave_meta(t,i,a,n)},saveTime))}),document.querySelector("#editor_"+n).addEventListener("keyup",function(){var e=document.querySelector("#editor_"+n).value;document.querySelector("#rsed_"+n).innerHTML="<p>"+e+"</p>",delay(function(){autoSave_meta(e,i,a,n)},saveTime)}),document.querySelector("#rsed_"+n).addEventListener("keyup",function(){var e=document.querySelector("#rsed_"+n).innerHTML;document.querySelector("#editor_"+n).value=e,o.innerHTML=e,delay(function(){autoSave_meta(e,i,a,n)},saveTime)}),document.querySelector("#wp-editor_"+n+"-wrap").addEventListener("click",function(e){var t,r;e.target.closest(".mce-container-body.mce-flow-layout")&&(t=o.innerHTML,document.querySelector("#rsed_"+n).innerHTML=t,delay(function(){autoSave_meta(t,i,a,n)},saveTime)),e.target.closest("#qt_editor_"+n+"_toolbar")&&(r=document.querySelector("#editor_"+n).value,document.querySelector("#rsed_"+n).innerHTML="<p>"+r+"</p>",delay(function(){autoSave_meta(r,i,a,n)},saveTime))})},t=0;t<d.length;t++)e(t);var r=[],o=!0,i=!1,a=void 0;try{for(var l,u=document.querySelectorAll(".rsed_meta_canUpdate")[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;r.push(s);for(var y=0;y<c.length;y++)if(s.id.substring(5)===c[y]){r.pop();break}}}catch(e){i=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(i)throw a}}var m=!0,f=!1,v=void 0;try{for(var _,S=function(){var a=_.value.id.substring(5);document.querySelector("#rsed_"+a).addEventListener("keyup",function(){var e=document.querySelector("#rsed_"+a),t=e.innerHTML,r=getMetaData(e),n=_slicedToArray(r,2),o=n[0],i=n[1];delay(function(){autoSave_meta(t,o,i,a)},saveTime)})},p=r[Symbol.iterator]();!(m=(_=p.next()).done);m=!0)S()}catch(e){f=!0,v=e}finally{try{!m&&p.return&&p.return()}finally{if(f)throw v}}document.querySelector(".rsed_title").addEventListener("keyup",function(){delay(function(){autoSave_title()},saveTime)})},1500)}),setTimeout(function(){jQuery("[data-editor]").each(function(m){jQuery("[data-editor]")[m].addEventListener("click",function(){setTimeout(function(){var e=!0,t=!1,r=void 0;try{for(var n,o=document.querySelectorAll(".media-button.media-button-insert")[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.addEventListener("click",function y(){setTimeout(function(){if("editor"===jQuery("[data-editor]")[m].dataset.editor){var e=document.querySelector("#editor_ifr").contentDocument.body.innerHTML;autoSave_mainText(document.querySelector(".rsed_content").innerHTML=e)}else{var t=jQuery("[data-editor]")[m].dataset.editor.substring(7,8),r=getMetaData(document.querySelector("#rsed_"+t)),n=_slicedToArray(r,2),o=n[0],i=n[1],a=document.querySelector("#editor_"+t+"_ifr").contentDocument.body.innerHTML;autoSave_meta(document.querySelector("#rsed_"+t).innerHTML=a,o,i,t);var d=!0,c=!1,l=void 0;try{for(var u,s=document.querySelectorAll(".media-button.media-button-insert")[Symbol.iterator]();!(d=(u=s.next()).done);d=!0){u.value.removeEventListener("click",y)}}catch(e){c=!0,l=e}finally{try{!d&&s.return&&s.return()}finally{if(c)throw l}}}},1e3)})}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}},1e3)})})},1500),jQuery(document).ready(function(){var e=document.querySelector("#set-post-thumbnail");e&&e.addEventListener("click",function(){setTimeout(function(){var t=document.querySelector(".attachment.selected"),r=void 0;t&&(r=t.dataset.id),document.querySelector(".media-modal-content").addEventListener("click",function(e){e.target.closest(".media-button-select.media-button")||(t=document.querySelector(".attachment.selected"))&&(r=t.dataset.id)}),document.querySelector(".media-button.media-button-select").addEventListener("click",function(){save_thumnail(r)})},500)})}),jQuery(document).ready(function(e){e(document).on("click",".mce-container.mce-btn-group",function(e){pictureEditingSave()}),e(document).on("click",".image-details .media-button.media-button-select",function(e){pictureEditingSave()})}),jQuery(document).ready(function(e){e(document).on("dragend","",function(e){if(focus)if("mainDiv"===e.target.id){var t=document.querySelector(".rsed_content").innerHTML;autoSave_mainText(document.querySelector("#editor_ifr").contentDocument.body.innerHTML=t)}else{id=focus.substring(5);var r=document.querySelector("#rsed_"+id),n=document.querySelector("#rsed_"+id).innerHTML;document.querySelector("#editor_"+id+"_ifr").contentDocument.body.innerHTML=n;var o=getMetaData(r),i=_slicedToArray(o,2);autoSave_meta(n,i[0],i[1],id)}})});